Proof of concept for retrieving sequence files (sam, bam, cram) via a streaming service

Dowload additional js dependencies
npm install mongodb

Connect to iRODs if needed

run server:
node bin/server.js

simple client:
curl -H "Content-type: application/octet-stream" -X "GET" 'localhost:9444/sample?region=Zv9_scaffold3541&accession=ERS1023809' - will merge files for a sample with the given accession number, currently just returns a list of iRODs files to be merged
curl -H "Content-type: application/octet-stream" -X "GET" 'localhost:9444/file?directory=/seq/18691&region=Zv9_scaffold3541&irods=1&name=18691_1%231.cram'
curl -H "Content-type: application/octet-stream" -X "GET" 'localhost:9444/file?directory=/staging/path&region=Zv9_scaffold3541&name=18691_1%231.cram'

'region' option can be specified multiple times

Output is in SAM format by default. Use 'format' option with value either 'sam' or 'bam' to change the output format.



